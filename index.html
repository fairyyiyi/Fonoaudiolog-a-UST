<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Malla Curricular Fonoaudiología UST</title>
  <style>
    /* Aquí pega el CSS que te mandé antes */
    body {
      margin: 0;
      padding: 1rem;
      background-color: #f9e6f7; /* rosa pastel muy suave */
      font-family: 'Inter', sans-serif;
      font-size: 11px;
      color: #3a2e4d;
    }

    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }

    .malla {
      display: flex;
      flex-wrap: nowrap; /* todos en fila horizontal */
      gap: 12px;
      overflow-x: auto;
      padding: 0 20px 10px 20px;
      scrollbar-width: thin;
      scroll-padding-inline: 20px;
    }

    .semestre {
      background: linear-gradient(135deg, #f3d9f4, #caa2d6); /* degradado rosa morado pastel */
      border-radius: 12px;
      padding: 8px 5px;
      min-width: 130px;
      max-width: 130px;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 0 10px rgba(202, 162, 214, 0.5);
      user-select: none;
    }

    .semestre h3 {
      margin: 0 0 8px 0;
      font-weight: 600;
      font-size: 13px;
      color: #52275a;
    }

    .ramos {
      display: flex;
      flex-direction: column;
      gap: 8px;
      width: 100%;
    }

    .ramo {
      background: linear-gradient(145deg, #fbeaff, #d8b0d4); /* rosa pastel */
      border-radius: 8px;
      padding: 8px 6px;
      text-align: center;
      cursor: pointer;
      box-shadow: 0 0 6px rgba(232, 185, 237, 0.7);
      min-height: 65px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #4a2a5a;
      transition: background-color 0.3s, box-shadow 0.3s, opacity 0.3s;
      line-height: 1.2;
      position: relative;
    }

    .ramo:hover:not(.inactivo):not(.aprobado) {
      background: linear-gradient(145deg, #eac8f2, #bb90c8);
      box-shadow: 0 0 12px rgba(184, 134, 211, 0.9);
    }

    .ramo.inactivo {
      opacity: 0.4;
      pointer-events: none;
      cursor: default;
      box-shadow: none;
      background: #f4e9f6;
      color: #9a7fa8;
    }

    .ramo.aprobado {
      background: linear-gradient(145deg, #bca1d4, #8a75b7); /* morado pastel */
      box-shadow: 0 0 12px #a688c6;
      color: white;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular Fonoaudiología UST</h1>
  <div class="malla"></div>

  <script>
    // Aquí pega el JS que te mandé antes
    // Define los semestres con sus ramos y prerrequisitos (abre)
    const semestres = [
      {
        nombre: "I Semestre",
        ramos: [
          { id: "r1", nombre: "Razonamiento Lógico Matemático", abre: ["r7", "r9"] },
          { id: "r2", nombre: "Introducción a la Fonoaudiología", abre: ["r8"] },
          { id: "r3", nombre: "Atención Básica de Urgencias", abre: [] },
          { id: "r4", nombre: "Taller de Competencias para el Aprendizaje", abre: [] },
          { id: "r5", nombre: "Principios de la Biología", abre: [] },
          { id: "r6", nombre: "Taller de Competencias Comunicativas", abre: [] },
        ],
      },
      {
        nombre: "II Semestre",
        ramos: [
          { id: "r7", nombre: "Acústica y Biomecánica", abre: ["r13"] },
          { id: "r8", nombre: "Comunicación y Lingüística", abre: ["r14"] },
          { id: "r9", nombre: "Procesos Cognitivos y Desarrollo en el Curso de Vida", abre: ["r15"] },
          { id: "r10", nombre: "Anatomía y Fisiología General", abre: ["r16"] },
          { id: "r11", nombre: "Salud y Sociedad", abre: ["r18"] },
          { id: "r12", nombre: "Cultura y Valores", abre: [] },
        ],
      },
      {
        nombre: "III Semestre",
        ramos: [
          { id: "r13", nombre: "Estadística y Epidemiología en Fonoaudiología", abre: ["r20"] },
          { id: "r14", nombre: "Significado y Estructuras del Lenguaje", abre: ["r21"] },
          { id: "r15", nombre: "Neuropsiquiatría", abre: ["r22"] },
          { id: "r16", nombre: "Bases Morfofuncionales de la Fonoaudiología", abre: ["r23", "r24"] },
          { id: "r17", nombre: "Personas y Sentido", abre: [] },
          { id: "r18", nombre: "Taller de Desarrollo Personal I", abre: [] },
          { id: "r19", nombre: "Inglés Básico I", abre: [] },
        ],
      },
      {
        nombre: "IV Semestre",
        ramos: [
          { id: "r20", nombre: "Evaluación del Desarrollo de Competencias MEC FON HITO 1", abre: [] },
          { id: "r21", nombre: "Lenguaje y Sociedad", abre: ["r25", "r26"] },
          { id: "r22", nombre: "Fonoestamología", abre: ["r27"] },
          { id: "r23", nombre: "Fisiopatología de la Comunicación", abre: [] },
          { id: "r24", nombre: "Evaluación Participativa con la Comunidad", abre: ["r28"] },
          { id: "r25", nombre: "Taller de Desarrollo Personal II", abre: [] },
          { id: "r26", nombre: "Inglés Básico II", abre: [] },
        ],
      },
      {
        nombre: "V Semestre",
        ramos: [
          { id: "r27", nombre: "Valoración Auditiva en el Curso de Vida I", abre: ["r29"] },
          { id: "r28", nombre: "Desarrollo en Niños, Niñas y Adolescentes I", abre: ["r30"] },
          { id: "r29", nombre: "Desarrollo en el Adulto y Personas Mayores", abre: ["r31"] },
          { id: "r30", nombre: "Abordaje Fonoaudiológico en la Comunicación Educativa", abre: [] },
          { id: "r31", nombre: "Intervención Comunitaria", abre: [] },
          { id: "r32", nombre: "Ética y Salud", abre: [] },
        ],
      },
      {
        nombre: "VI Semestre",
        ramos: [
          { id: "r33", nombre: "Gestión e Innovación en Fonoaudiología", abre: ["r34"] },
          { id: "r34", nombre: "Abordaje en Niños, Niñas y Adolescentes I", abre: ["r35"] },
          { id: "r35", nombre: "Abordaje en Adultos y Personas Mayores I", abre: ["r36"] },
          { id: "r36", nombre: "Bases de la Rehabilitación y Redes Integradas de Servicio de Salud", abre: [] },
          { id: "r37", nombre: "Valoración Auditiva en el Curso de Vida II", abre: ["r38"] },
          { id: "r38", nombre: "Desarrollo de la Voz y Técnica Vocal", abre: ["r39"] },
          { id: "r39", nombre: "Electivo I", abre: [] },
        ],
      },
      {
        nombre: "VII Semestre",
        ramos: [
          { id: "r40", nombre: "Abordaje en Niños, Niñas y Adolescentes II", abre: ["r41"] },
          { id: "r41", nombre: "Abordaje en Adultos y Personas Mayores II", abre: ["r42"] },
          { id: "r42", nombre: "Electivo II", abre: [] },
          { id: "r43", nombre: "Abordaje Auditivo en el Curso de Vida", abre: ["r44"] },
          { id: "r44", nombre: "Abordaje de la Voz Hablada y Cantada I", abre: ["r45"] },
          { id: "r45", nombre: "Práctica Curricular I", abre: ["r46"] },
        ],
      },
      {
        nombre: "VIII Semestre",
        ramos: [
          { id: "r46", nombre: "Metodología de la Investigación", abre: ["r47"] },
          { id: "r47", nombre: "Abordaje de la Deglución y Alimentación Oral", abre: [] },
          { id: "r48", nombre: "Electivo III", abre: [] },
          { id: "r49", nombre: "Evaluación del Desarrollo de Competencias MEC FON HITO 2", abre: [] },
          { id: "r50", nombre: "Abordaje Vesicular en el Curso de Vida", abre: [] },
          { id: "r51", nombre: "Abordaje de la Voz Hablada y Cantada II", abre: [] },
          { id: "r52", nombre: "Práctica Curricular II", abre: [] },
        ],
      },
      {
        nombre: "IX Semestre",
        ramos: [
          { id: "r53", nombre: "Seminario de Grado I", abre: ["r54"] },
          { id: "r54", nombre: "Internado Profesional I", abre: [] },
          { id: "r55", nombre: "Internado Profesional II", abre: [] },
        ],
      },
      {
        nombre: "X Semestre",
        ramos: [
          { id: "r56", nombre: "Seminario de Grado II", abre: [] },
          { id: "r57", nombre: "Internado III", abre: [] },
          { id: "r58", nombre: "Internado IV", abre: [] },
        ],
      },
    ];

    const aprobados = {};

    function renderizarMalla() {
      const container = document.querySelector(".malla");
      container.innerHTML = "";

      semestres.forEach(semestre => {
        const semestreDiv = document.createElement("div");
        semestreDiv.classList.add("semestre");

        const titulo = document.createElement("h3");
        titulo.textContent = semestre.nombre;
        semestreDiv.appendChild(titulo);

        const ramosDiv = document.createElement("div");
        ramosDiv.classList.add("ramos");

        semestre.ramos.forEach(ramo => {
          const ramoDiv = document.createElement("div");
          ramoDiv.classList.add("ramo");
          ramoDiv.id = ramo.id;
          ramoDiv.textContent = ramo.nombre;
          ramosDiv.appendChild(ramoDiv);
        });

        semestreDiv.appendChild(ramosDiv);
        container.appendChild(semestreDiv);
      });
    }

    function actualizarActivacion() {
      semestres.forEach((semestre, i) => {
        semestre.ramos.forEach(ramo => {
          const el = document.getElementById(ramo.id);
          if (i === 0) {
            el.classList.remove("inactivo");
          } else {
            el.classList.add("inactivo");
          }
          // Quitar aprobado visual para refrescar (se actualiza en el click)
          // No tocamos aquí aprobado, solo activacion
        });
      });

      Object.keys(aprobados).forEach(idAprobado => {
        if (!aprobados[idAprobado]) return;

        const ramoAprobado = semestres
          .flatMap(s => s.ramos)
          .find(r => r.id === idAprobado);

        if (ramoAprobado && ramoAprobado.abre.length > 0) {
          ramoAprobado.abre.forEach(idAbre => {
            const elAbre = document.getElementById(idAbre);
            if (elAbre) {
              elAbre.classList.remove("inactivo");
            }
          });
        }
      });

      semestres.forEach((semestre, i) => {
        if (i === 0) return;

        const algunoActivo = semestre.ramos.some(ramo => {
          const el = document.getElementById(ramo.id);
          return !el.classList.contains("inactivo");
        });

        if (algunoActivo) {
          semestre.ramos.forEach(ramo => {
            const el = document.getElementById(ramo.id);
            if (ramo.abre.length === 0) {
              el.classList.remove("inactivo");
            }
          });
        }
      });
    }

    function onClickRamo(event) {
      const ramoId = event.currentTarget.id;
      const ramoEl = event.currentTarget;

      if (ramoEl.classList.contains("inactivo")) return;

      const aprobado = aprobados[ramoId];
      if (aprobado) {
        aprobados[ramoId] = false;
        ramoEl.classList.remove("aprobado");
      } else {
        aprobados[ramoId] = true;
        ramoEl.classList.add("aprobado");
      }

      actualizarActivacion();
    }

    function init() {
      renderizarMalla();
      actualizarActivacion();

      semestres.forEach(semestre => {
        semestre.ramos.forEach(ramo => {
          const el = document.getElementById(ramo.id);
          el.addEventListener("click", onClickRamo);
        });
      });
    }

    window.onload = init;
  </script>
</body>
</html>
